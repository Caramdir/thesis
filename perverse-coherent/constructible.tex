\chapter{Perverse constructible sheaves}

In this chapter we will consider a complex manifold $X$ together with a stratification $\setset S$ by complex submanifold.
We let $D_{\setset S}^b(X)$ be the bounded derived category of $\setset S$-constructible sheaves on $X$.
Recall that there is a \emph{middle perverse} t-structure on $D_{\setset S}^b(X)$, given by
\begin{equation*}
%    \label{eq:def:perverse:bbd}
    \begin{aligned}
        \perv D_{\setset S}^{\le 0}(X) & = \{ \sheaf F ∈ D^b_{\setset S}(X) : H^n(i_S^*\sheaf F) = 0 \text{ for all $n > -\frac12 \dim S$ and all $S ∈ \setset S$}\}; \\
        \perv D_{\setset S}^{\ge 0}(X) & = \{ \sheaf F ∈ D^b_{\setset S}(X) : H^n(i_S^!\sheaf F) = 0 \text{ for all $n < -\frac12 \dim S$ and all $S ∈ \setset S$}\}.
    \end{aligned}
\end{equation*}
In Section~\ref{sec:constructible_and_Lagrangian} we will make Theorem~\ref{thm:motivation} precise and give a proof.
In Section~\ref{sec:constructible_main_thm} we will formulate and prove a precise analogue of Theorem~\ref{thm:main} in the constructible setting.

\section{Perverse sheaves and Lagrangians}\label{sec:constructible_and_Lagrangian}

This section follows the exposition of \cite[Section 2.2]{Jin:arXiv:HolomorphicLagrangianBranesCorrespondToPerverseSheaves}.

We let
\[
    Λ_{\setset S} = \bigcup_{S ∈ \setset S} T^*_S X \subseteq T^*X
\]
be the standard conical Lagrangian associated to the stratification $\setset S$.

\begin{Def}[{\cite[Definition~4.2.7]{Dimca:2004:SheavesInTopology}}]
    Let $\setset S$ be a Whitney stratification of $X$ and $f\colon X → ℂ$ holomorphic.
    The \emph{stratified critical locus} of $f$ is
    \[
        Σ_{\setset S}(f) =
        \bigcup_{X_α ∈ \setset S} Σ(\res{f}{X_α}),
    \]
    where $Σ(\res{f}{X_α})$ is the (ordinary) critical locus of the restriction of $f$ to $X_α$.
\end{Def}

In the following we call a triple $(x, ξ, F)$ consisting of a smooth point $(x, ξ) ∈ Λ_{\setset S}$ and the germ of a holomorphic function $F$ at $x$ such that $F(x) = 0$, $d(\Re F)_x = ξ$\todo{Complex vs.~real cotangent space?}\ and the graph $Γ_{d(\Re F)}$ is transverse to $Λ_{\setset S}$ at $(x, ξ)$ a \emph{test triple}\todo{$F$ should have an isolated singularity at $x$.}.
We will assume that $F$ is defined on a ball $B_{2ε}(x)$ and with $ε$ small enough that $B_ε(x) ∩ Σ_{\setset S}(F) = \{x\}$.

\begin{Rem}
    If $x ∈ S$ then a covector $(x, ξ)$ is called \emph{degenerate} if it is contained in 
    \[
        D^*_SX = T^*_SX ∩ \bigcup_{S' \ne S} \overline{T^*_{S'} X}.
    \]
    The smooth locus of $Λ_{\setset S}$ consists exactly of the non-degenerate covectors\todo{Why?}.\todo{Why the transversality condition?}
\end{Rem}

Recall that for any test triple $(x,ξ,F)$ there is a vanishing cycles functor 
\[
    φ_F\colon D_{\setset S}(B_ε(x)) → \dconstrb{F^{-1}(0) ∩ B_ε(x)}.
\]
Note that for any $\sheaf F ∈ D_{\setset S}(B_ε(x))$ the sheaf $φ_F \sheaf F$ is supported at $x$ \cite[Proposition~4.2.7]{Dimca:2004:SheavesInTopology}\todo{Or (without proof) \cite[(8.6.12)]{KashiwaraSchapira:1994:SheavesOnManifolds}}.
%\begin{Lem}[{\cite[Proposition~4.2.7]{Dimca:2004:SheavesInTopology}}]
%    \label{lem:constructible:supp_of_vc_in_critical_locus}%
%    Let $\sheaf F$ be a constructible sheaf on $X$ with respect to the  Whitney stratification $\setset S$.
%    Then 
%    \[
%        \supp \pervVC{f}\sheaf F \subseteq Σ_{\setset S}(f).
%    \]
%\end{Lem}

\begin{Def}
    Let $(x, ξ, F)$ be a test triple.
    The \emph{local Morse group functor} (or \emph{microlocal stalk functor}) is
    \[
        \localMorse{x}{F}{\sheaf F} = ι_x^* \pervVC{F} j^* {\sheaf F}\colon D^b_{\setset S}(X) → D^b(ℂ),
    \]
    where $j$ is the inclusion $B_ε(x) \hookrightarrow X$.
\end{Def}
%ToDo: Note about microlocal stalks and singular support.

Using standard facts about the vanishing cycles functor\todo{reference?}\ it is easy to see that the local Morse group functor is t-exact from the perverse t-structure on $D^b_{\setset S}(X)$ to the standard t-structure on $D^b(ℂ)$.
The following theorem shows that moreover it can be used to test whether a given sheaf is perverse.

% ToDo: Proof or reference
%\begin{Thm}[{\cite[Corollary~10.3.13]{KashiwaraSchapira:1994:SheavesOnManifolds}}]
%    Let $f\colon X → ℂ$ be a holomorphic function.
%    Then the functor $\pervVC{f}$ is t-exact with respect to the t-structure given by the middle perversity.
%\end{Thm}

\begin{Thm}[{\cite[Proposition 2.9]{Jin:arXiv:HolomorphicLagrangianBranesCorrespondToPerverseSheaves}}]
    For each stratum $S ∈ \setset S$ choose a test triple $(x_S, ξ_S, F_S)$ with $(x_S , ξ_S) ∈ T^*_S X$.
    Then a sheaf $\sheaf F ∈ D^b_{\setset S}(X)$ is perverse if and only $\localMorse{x_S}{F_S}{\sheaf F}$ is concentrated in cohomological degree $0$ for all $S ∈ \setset S$.
\end{Thm}
% ToDo: read proof

The following lemma is supposedly standard.
\begin{Lem}
    Let $(x, ξ, F)$ be a test triple and $\sheaf F ∈ D^b_{\setset S}(X)$.
    Then there are (canonical?) isomorphisms
    \[
        \localMorse{x}{F}{\sheaf F} \cong
        Γ\bigl(B_ε(x),\, B_ε(x) ∩ F^{-1}(t),\, \sheaf F\bigr) \cong
        Γ\bigl(B_ε(x),\, B_ε(x) ∩ \{\Re F < μ\},\, \sheaf F\bigr)
    \]
    for $0 < \abs{t} \ll 1$ and $μ \le 0$ with $\abs{μ} \ll 1$.
\end{Lem}
% ToDo: proof/reference

Next: Unstable manifold.

\section{Constructible version of Theorem~\ref{thm:main}}\label{sec:constructible_main_thm}

We return now to the claim about exact functors on the t-structure of constructible perverse sheaves made in the introduction.
For simplicity we restrict to the complex (i.e.~middle perversity) case.
Thus let $X$ be a complex manifold and $\setset S$ a finite stratification of $X$ by complex submanifolds.
We write $D^b_{\setset S}(X)$ for the bounded derived category of $\setset S$-constructible sheaves on $X$.
We call a sheaf $\sheaf F ∈ \smash[t]{D^b_{\setset S}(X)}$ perverse if it is perverse with respect to the middle perversity function on $\setset S$.
We are going to formulate and prove an analog of Theorem~\ref{thm:main} in this situation.

A closed real submanifold $Z$ of $X$ is called a \emph{measuring submanifold} if for each stratum $S$ of $X$ either $Z ∩ \overline S = \emptyset$ or $\dim_ℝ Z ∩ S = \dim_ℂ S$.
A \emph{measuring family} is a collection of measuring submanifolds $\{ Y_i \}$ such that each connected component of each stratum has non-empty intersection with at least one $Y_i$.
Similarly to Theorem~\ref{thm:existence_of_lcimeasuring}, one shows inductively that such a collection of submanifolds always exists.

\begin{Thm}
    Let $\measuringFam$ be a measuring family of submanifolds of $X$.
    A sheaf $\sheaf F ∈ D^b_{\setset S}(X)$ is perverse if and only if $ι_Z^! \sheaf F$ is concentrated in cohomological degree $0$ for each submanifold $Z ∈ \measuringFam$.
\end{Thm}

The proof of the following lemma is based on a MathOverflow post by Geordie Williamson \cite{MO:VanishingShriekRestrictionConstructible}.
The author takes responsibility for possible mistakes.

\begin{Lem}\label{lem:constructible_local_vanishing}%
    Let $X$ be a real manifold, $\sheaf F$ be a constructible sheaf (concentrated in degree $0$) on $X$ and let $i\colon Z \hookrightarrow X$ be the inclusion of a closed submanifold.
    Then $H^j(i^!\sheaf F) = 0$ for $j>\codim_XZ$.
\end{Lem}

\begin{proof}
    By taking normal slices we can reduce to the case that $Z = \{z\}$ is a point.
    Let $j$ be the inclusion of $X \setminus \{z\}$ into $X$ and consider the distinguished triangle
    \[
        i_!i^! \sheaf F → \sheaf F → j_*j^*\sheaf F \xrightarrow{+1}.
    \]
    By~\cite[Lemma~8.4.7]{KashiwaraSchapira:1994:SheavesOnManifolds} we have
    \[
        H^j(j_*j^*\sheaf F)_z = H^j(S^{\dim X - 1}_ε, \sheaf F)
    \]
    for a sphere $S^{\dim X - 1}_ε$ around $z$ of sufficiently small radius.
    The latter cohomology vanishes for $j \ge \dim X$ and hence $H^j(i^! \sheaf F) = 0$ for $j>\dim X$ as required.
\end{proof}

\begin{proof}[Proof of Theorem]
    Define two full subcategories $\perv[L] D^{\le 0}(X)$ and $\perv[L] D^{\ge 0}(X)$ of $D^b_{\setset S}(X)$ by
    \begin{align*}
        \perv[L] D^{≤0}(X) & = \left\{ \sheaf F ∈ D^b_{\setset S}(X) : ι_Z^! \sheaf F ∈ D^{≤0}(Z) \text{ for all $Z ∈ \measuringFam$} \right\}, \\
        \perv[L] D^{≥0}(X) & = \left\{ \sheaf F ∈ D^b_{\setset S}(X) : ι_Z^! \sheaf F ∈ D^{≥0}(Z) \text{ for all $Z ∈ \measuringFam$} \right\}.
    \end{align*}
    We will show that these categories are the same as the categories $\perv D^{≤0}(X)$ and $\perv D^{≥0}(X)$ defining the perverse t-structure on $D^b_{\setset S}(X)$.

    We induct on the number of strata.
    If $X$ consists of only one stratum and $Z$ is a measuring submanifold, then $ι_Z^! \sheaf F \cong ω_{Z/X} \otimes ι_Z^* \sheaf F$ and hence $ι_Z^! \sheaf F$ is in degree $0$ if and only if $\sheaf F$ is in degree $-\frac 12 \dim_ℝ X$.
    So assume that $X$ has more then one stratum.
    Without loss of generality we can assume that $X$ is connected.
    Let $U$ be the union of all open strata and $F$ its complement.
    Both $U$ and $F$ are unions of strata of $X$.
    Let $j$ be the inclusion of $U$ and $i$ the inclusion of $X$. 
    
    \begin{itemize}
        \item 
            If $\sheaf F ∈ \perv D^{≤0}(X)$, then $\sheaf F ∈ \perv[L] D^{≤0}$ follows in exactly the same way as in the coherent case, using Lemma~\ref{lem:constructible_local_vanishing}.
        \item 
            Let $\sheaf F ∈ \perv D^{≥0}(X)$.
            Then $i^! \sheaf F ∈ \perv D^{≥0}(F)$ and $j^*\sheaf F ∈ \perv D^{≥0}(U)$.
            Let $Z$ be a measuring subvariety.
            Consider the distinguished triangle 
            \[ 
                i_*i^! \sheaf F → \sheaf F → j_*j^*\sheaf F.
            \]
            Using base change, induction and the (left)-exactness of the push-forward functors one sees that $ι_Z^!$ of the outer sheaves in the triangle are concentrated in non-negative degrees.
            Thus so is $ι_Z^! \sheaf F$.
        \item 
            Let $\sheaf F ∈ \perv[L] D^{≥0}(X)$.
            Since all measurements are local this implies that $j^* \sheaf F ∈ \perv[L] D^{≥0}(U) = \perv D^{≥0}(U)$.
            Using the same triangle and argument as in the last point, this implies that also $i^! \sheaf F ∈ \perv[L] D^{≥0}(F) = \perv D^{≥0}(F)$.
            Hence, by recollement, $\sheaf F ∈ \perv D^{≥0}(X)$.
        \item 
            Finally, let $\sheaf F ∈ \perv[L] D^{≤0}(X)$.
            Again this immediately implies that $j^* \sheaf F ∈ \perv[L] D^{≤0}(U) = \perv D^{≤0}(U)$.
            Thus $j_!j^*\sheaf F ∈ \perv D^{≤0}(X)$.
            Let $Z$ be a measuring submanifold and consider the distinguished triangle
            \[
                ι_Z^! j_!j^*\sheaf F → ι_Z^! \sheaf F → ι_Z^! i_*i^* \sheaf F.
            \]
            By what we already know, the first sheaf is concentrated in non-positive degrees and hence so is $ι_Z^! i_*i^* \sheaf F$.
            By base change and the exactness of $i_*$ this implies that $i^* \sheaf F ∈ \perv[L] D^{≤0}(F) = \perv D^{≤0}(F)$.
            Hence, by recollement, $\sheaf F ∈ \perv D^{≤0}(X)$.
            \qedhere
    \end{itemize}
\end{proof}

\begin{Rem}
    The equality $\perv D^{≥0}(X) = \perv[L]D^{≥0}(X)$ could also be proved in exactly the same way as in the coherent case, using~\cite[Exercise~\textsc{x}.10]{KashiwaraSchapira:1994:SheavesOnManifolds}.
\end{Rem}
