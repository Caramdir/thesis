\chapter{Prerequisites}

% finite type (implies Noetherian): dualizing complex is nice
% assumption of G: makes X/G have affine diagonal
Throughout this part we will be concerned with a scheme $X$ with an action by an affine group scheme $G$.
We assume that $X$ and $G$ are both of finite type over a field $k$.

We will make use of the usual notations for derived categories.
Thus $\dqc{X}$ is the derived category of the Abelian category of quasi-coherent sheaves on $X$ and $\dcoh{X}$ is its full subcategory of complexes with coherent cohomology.
More generally $\dcat{}{X}$ is the derived category of sheaves of $k$-modules on $X$.
For a ring $R$, the derived category of $R$-modules will be denoted by $\dcat{}{R}$.
To avoid cluttering the notation we will also usually suppress the signifiers $\mathbb R$ and $\mathbb L$ on functors between derived categories.
%Note that unlike in Part~\ref{part:d-mod} we will only work on the level of triangulated categories and not their dg enhancements.

If $Y$ is a subscheme of $X$ we will always write $i_Z$ for the inclusion $Z \hookrightarrow X$.

\section{Operations on coherent sheaves}

We will be mainly concerned with the category $\dcohbG{X}$, the bounded derived category of $G$-equivariant coherent sheaves on $X$.
For the reader familiar with stacks, this is the same category as the bounded derived category of coherent sheaves on the quotient stack $[X/G]$.
It is also equivalent to the full subcategory of $\dqcbG{X}$ consisting of complexes with coherent cohomology \cite[Corollary~2.11]{ArinkinBezrukavnikov:2010:PerverseCoherentSheaves}.
There is a forgetful functor
\[
    \Forget\colon \dcohbG{X} → \dcohb{X}
\]
to the non-equivariant bounded derived category of coherent sheaves on $X$.
We will frequently apply functors defined on the latter category to equivariant sheaves without explicitly mentioning the functor $\Forget$.

Let $Z$ be a closed subscheme of $X$.
Then there are functors $ι_Z^!$ and $ι_Z^*$ from $\dcohb X$ to $\dcohb Z$, defined by
\[
    ι_Z^*({-}) = \O_Z \otimes_{\O_X} {-}
    \qquad\text{and}\qquad
    ι_Z^!({-}) = \sheafHom_{\O_X}(\O_Z,\, {-}).
\]
We note again that the symbols $\otimes$ and $\sheafHom$ denote the corresponding derived functors.
If $U$ is an open subscheme of $X$ then the functor $ι_U^* = ι_Z^!$ is the restriction functor $\dcohb X → \dcohb U$.
For a general locally closed subscheme, the restriction functors are defined be composing the above functors.

We will also need the corresponding $k$-module functors, which we will denote by bold letters.
In particular, if $Z$ is a closed subspace of $X$ (as a topological space), then we set
\[
    \mathbf{ι}_{Z}^!({-}) = \sheafHom_{k_X}(k_{Z},\, {-}).
\]
Following \cite[Variation~3 in~\RomanNum{IV}.1]{Hartshorne:1966:ResiduesAndDuality} we write
\[
    \lc{Z} = \mathbf{ι}_{Z,*} \mathbf{ι}_{Z}^!.
\]
Again we note that these functors should be seen as functors between the derived categories.
It is well known that if $\sheaf F$ is a (complex of) quasi-coherent sheaf(s) on $X$, then $\lc{Z} \sheaf F$ is again quasi-coherent \cite[Corollaire~\RomanNum{II}.3]{SGA2}.

Let $x$ be a (not necessarily closed) point of $X$.
We will write $\mathbf ι_x^*$ for the functor of talking stalks at $x$ and set $\mathbf ι_x^! = \mathbf ι_x^*\lc{\overline{\{x\}}}$.
As noted before, we will apply all of these functors to equivariant sheaves without explicitly mentioning the forgetful functor.

Finally we will need the Grothendieck-Verdier duality functor on $\dcohbG X$.
It is defined exactly as in the non-equivariant situation (cf.~\cite[Chapter~\RomanNum{V}]{Hartshorne:1966:ResiduesAndDuality}).
Thus, an equivariant dualizing complex on $X$ is an object $\dualizingCx ∈ \dcohbG X$ such each object $\sheaf F ∈ \dcohbG X$ is $\dualizingCx$-reflexive, i.e.~such that the natural transformation
\[
    \sheaf F → \sheafHom(\sheafHom(\sheaf F, \dualizingCx),\, \dualizingCx) \qquad (\sheaf F ∈ \dcohb X)
\]
is an isomorphism.
We write $\dualize$ for the endofunctor $\sheafHom({-}, \dualizingCx)$ of $\dcohbG X$.
Since $\sheafHom$ commutes with the forgetful functor, if $\dualizingCx$ is an equivariant dualizing complex, then $\Forget(\dualizingCx) ∈ \dcohb X$ is a (non-equivariant) dualizing complex.
Under our assumptions on $X$ there always exists an equivariant dualizing complex $\dualizingCx$ \cite[Theorem~2.18]{ArinkinBezrukavnikov:2010:PerverseCoherentSheaves}.
Using \cite[\RomanNum{V}.7]{Hartshorne:1966:ResiduesAndDuality}, we will further assume that for each (not necessarily closed) point $x ∈ X$ the complex $\mathbf{ι}_x^! \dualizingCx$ is concentrated in cohomological degree $-\dim x$.

We finish this section with two lemmas about vanishing of local cohomology above or below a certain degree.

\begin{Lem}
    \label{lem:pre:stalk-and-costalk-vanishing}%
    Let $\sheaf F$ be a coherent sheaf on $X$ and let $x$ be a closed point of $X$.
    Then $\mathbf ι_x^* \dualize \sheaf F ∈ \dcat{\ge 0}{\O_x}$ if and only if $\mathbf ι_x^! \sheaf F ∈ \dcat{\le 0}{\O_x}$.
\end{Lem}

\begin{proof}
    The proof of this lemma is essentially the same as the one of \cite[Lemma~3.3(a)]{ArinkinBezrukavnikov:2010:PerverseCoherentSheaves}.
    Concretely, by \cite[\RomanNum{V}.6]{Hartshorne:1966:ResiduesAndDuality}, there is an isomorphism of functors
    \[
        \mathbf ι_z^!({-}) \cong \Hom_{\O_x}\bigl(\dualize({-}),\, \sheaf I_x\bigr),
    \]
    where $\sheaf I_x$ is the injective hull of the residue field of $\O_x$.
    The statement now follows from the fact that $\Hom_{\O_x}({-},\, \sheaf I_x)$ is exact and kills no finitely generated $\O_x$-module \cite[\RomanNum{V}.5]{Hartshorne:1966:ResiduesAndDuality}.
\end{proof}

\begin{Lem}
    \label{lem:pre:top-and-qc-restriction-vanishing}%
    Let $\sheaf F$ be a coherent sheaf on $X$ and let $Z$ be a closed subvariety of $X$.
    Let $n$ be an integer.
    Then $\lc{Z} \sheaf F ∈ \dcat{\ge 0}{Z}$ if and only if $ι_Z^! \sheaf F ∈ \dcat{\ge 0}{Z}$.
\end{Lem}

\begin{proof}
    This is the equivalence of (i) and (ii) in \cite[Proposition~\RomanNum{VII}.1.2]{SGA2} with $Y = S = Z$, $G = \sheaf F$, $F = \O_Z$ and $n=1$.
\end{proof}

\section{Perverse coherent sheaves}
\label{sec:pc:pre:pc}

We keep the general assumptions on $X$ and the dualizing complex $\dualizingCx$.
We write $\Xtop$ for the set of generic points of $G$-stable subschemes of $X$.
It is a subset of the topological space of $X$ and we will consider it with the induced topology.

By a \emph{perversity} we mean a function $p\colon \{0,\dotsc,\dim X\} → ℤ$.
For $x ∈ \Xtop$ we abuse notation and set $p(x) = p(\dim x)$.
Then $p\colon \Xtop → ℤ$ is a perversity function in the sense of~\cite{Bezrukavnikov:arXiv:PerverseCoherentSheaves}.
Note that we insist that $p(x)$ only depends on the dimension of $\overline x$.

A perversity is called \emph{monotone} if it is decreasing and \emph{comonotone} if the \emph{dual perversity} $\overline p(n) = -n - p(n)$ is decreasing.
It is \emph{strictly monotone} (resp.~\emph{strictly comonotone}) if for all $x,y ∈ \Xtop$ with $\dim x < \dim y$ one has $p(x) > p(y)$ (resp.~$\overline p(x) > \overline p(y)$).
Note that a strictly monotone perversity is not necessarily strictly decreasing (e.g.~if $X$ only has even-dimensional $G$-orbits).

Following \cite{ArinkinBezrukavnikov:2010:PerverseCoherentSheaves} we know have all ingredients to define the perverse t-structure on $\dcohbG X$.

\begin{Def}
    \label{def:perverse-t-structure}%
    Given a perversity $p$ we define the following full subcategories of $\dcohbG X$:
    \begin{align*}
        \dpc{≤0}{X} & =
        \bigl\{ \sheaf F ∈ \dcohb{X} : \mathbf ι_x^*\sheaf F ∈ \dcat{≤p(x)}{\O_x} \text{ for all $x ∈ \Xtop$}\bigr\}, \\
        \dpc{≥0}{X} & =
        \bigl\{ \sheaf F ∈ \dcohb{X} : \mathbf ι_x^!\sheaf F ∈ \dcat{≥p(x)}{\O_x} \text{ for all $x ∈ \Xtop$}\bigr\}.
    \end{align*}
\end{Def}

\begin{Thm}[{\cite[Theorem~3.10]{ArinkinBezrukavnikov:2010:PerverseCoherentSheaves}}]
    \label{thm:perverse-t-structure}%
    If $p$ is monotone and comonotone, then $(\dpc{≤0}{X},\, \dpc{≤0}{X})$ defines a t-structure on $\dcohbG X$.
\end{Thm}

This t-structure is called the \emph{perverse t-structure} with respect to $p$ on $\dcohbG X$.
Objects in its heart are called \emph{perverse coherent sheaves} (with respect to $p$ on $X$).

The perverse t-structure is compatible with duality, exchanging the perversity $p$ with its dual.

\begin{Lem}[{\cite[Lemma~3.3]{ArinkinBezrukavnikov:2010:PerverseCoherentSheaves}}]
    \label{lem:perverse-t-structure-and-duality}%
    Let $p$ be any perversity. Then
    \[
        \dualize\bigl(\dpc{≤0}{X}\bigr) = \dpc[\overline p]{≥0}{X}.
    \]
\end{Lem}

\begin{Ex}
    The best-studied case of perverse coherent sheaves is the nilpotent cone $N$ of a reductive group $G$ with the adjoint action.
    It is well known that there are finitely many $G$-orbits on $N$, all of which are even dimensional.
    Thus there is a \emph{middle perversity} given by
    \[
        p(x) = \overline p(x) = -\frac 12 \dim x, \qquad x ∈ \Xtop[N].
    \]
    This t-structure has important applications in geometric representation theory, for example \cite{Bezrukavnikov:2003:QuasiExceptionalSets} and \cite{BezrukavnikovMircovic:2013:RepresentationsOfSSLieAlgebrasInPrimeCharAndNoncommutativeSpringerResolution}.
    For an overview of the theory of perverse coherent sheaves on nilpotent cones and the related category of exotic sheaves we refer to \cite{Achar:arXiv:NotesOnExoticAndPerverseCoherentSheaves}.
\end{Ex}

For later use we state the following variant of the Grothendieck Finiteness Theorem \cite[Théorème~2.1]{SGA2}.
The given formulation is from \cite[Corollary~3.12]{ArinkinBezrukavnikov:2010:PerverseCoherentSheaves}, where the reader can find a short proof using the theory of perverse coherent sheaves.
\begin{Thm}
    \label{thm:grothendieck-finiteness}%
    Let $p$ be a monotone and comonotone perversity on $X$.
    Let $x ∈ \Xtop$, set $U = X \setminus \overline x$ and let $j\colon U \hookrightarrow X$ be the inclusion.
    Let $\sheaf F ∈ \dpc{≥0}{U}$.
    Then $H^n(j_*\sheaf F)$ is coherent for $n ≤ p(x)-2$.
\end{Thm}
