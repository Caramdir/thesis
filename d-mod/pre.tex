\chapter{Prerequisites}%
\label{ch:d-mod:pre}

We fix an algebraically closed base field $k$ of characteristic $0$.
All stacks in this thesis are assumed to be algebraic QCA stacks over $k$.
As we will summarize in Section~\ref{sec:d-mod:pre:d-mods}, the QCA condition ensures that the category of D-modules on stacks is well-behaved.
In particular for any stack $\stack X$ we have:
\begin{itemize}
    \item The diagonal morphism $Δ\colon \stack X → \stack X × \stack X$ is schematic.
    \item There exists a scheme $Z$ with a smooth and surjective map $Z → \stack X$.
    \item $\stack X$ is quasi-compact.
    \item The automorphism groups of the geometric points of $\stack X$ are affine.
    \item The loop space (or inertia stack) $\ls \stack X = \stack X ×_{\stack X × \stack X} \stack X$ is of finite presentation over $\stack X$.
\end{itemize}
The first two conditions ensure that the stack is algebraic, the other three that it is quasi-compact with affine automorphism group (QCA).
For details on QCA stacks we refer to~\cite{DrinfeldGaitsgory:2013:FinitenessQuestions}.
Every quotient of a scheme of finite type over $k$ by an affine algebraic group is a QCA stack, and we will be mainly interested in these.

In order to correctly define categories of D-modules on stacks it is necessary to work with dg-categories.
We refer to \cite{Keller:2006:OnDGCategories} for an introduction to dg categories.
It is often convenient to regard (pretriangulated) dg categories as $k$-linear stable $(∞,1)$-categories \cite{Lurie:2009:HigherToposTheory,Lurie:2014-draft:HigherAlgebra}, which can be done via the nerve construction \cite{Cohn:arXiv:DGCategoriesAreStableInfinityCategories,Faonte:arXiv:SimplicialNerveOfAnAinfinityCategory}. %\cite[Section~1.3.1]{Lurie:2014-draft:HigherAlgebra}
We will switch between those two languages without explicitly mentioning the intervening constructions and apply results from \cite{Lurie:2014-draft:HigherAlgebra} to dg categories.
Fortunately, a superficial knowledge of dg/$∞$-categories should be sufficient for reading this thesis.

\section{D-modules on stacks}
\label{sec:d-mod:pre:d-mods}

The second part of this thesis is primarily concerned with D-modules on quotient stacks.
Unfortunately there is currently no comprehensive text available that covers all the basic constructions and properties of D-modules on stacks (or even the \emph{dg category} of D-modules on schemes).
Thus we collect all the relevant properties (without proof) in this section.
The upshot is that the familiar \enquote{six functors formalism} essentially works for holonomic D-modules and schematic morphisms of stacks.

The category of D-modules on a stack $\stack X$ can be either constructed via descent \cite{BeilinsonDrifeld:unpublished:Hitchin,DrinfeldGaitsgory:2013:FinitenessQuestions} or equivalently as ind-coherent sheaves on the de Rham space of $\stack X$ \cite{GaitsgoryRozenblyum:2014:CrystalsAndDModules}.
While the first construction is more \enquote{hands on}, the second construction is often more useful from a theoretical point of view.
It is explained in detail in the upcoming book \cite{GaitsgoryRozenblyum:prelim:StudyInDAG} (see also \cite{FrancisGaitsgory:2012:ChiralKoszulDuality} for an overview).
Many basic properties of the category $\catDMod{\stack X}$ are explored in \cite{DrinfeldGaitsgory:2013:FinitenessQuestions} and most of the following assertions are taken from there.

For any morphism $f\colon \stack X → \stack Y$ the constructions yield a continuous functor $f^!\colon \catDMod{\stack Y} → \catDMod{\stack X}$ and (after some work) a not necessarily continuous functor $f_*\colon \catDMod{\stack X} → \catDMod{\stack Y}$.
If $p\colon \stack X → \pt$ is the structure map then we set
\[
    \ΓdR(\stack X,\, {-}) = p_*({-}) \colon \catDMod{\stack X} → \catVect.
\]
The functor $\ΓdR$ is representable by a D-module $k_{\stack X}$, i.e.
\[
    \ΓdR(\stack X,\, {-}) = \Hom_{\catDMod{\stack X}}(k_{\stack X},\, {-}).
\]
Again we note that $\ΓdR(\stack X,\, {-})$ is usually not continuous and hence the object $k_{\stack X}$ not compact.

Let $Δ\colon \stack X → \stack X × \stack X$ be the diagonal.
The category $\catDMod{\stack X}$ has a monoidal structure given by the tensor product
\[
    \sheaf F \otimes \sheaf G = Δ^!\bigl( \sheaf F \boxtimes \sheaf G \bigr).
\]
The unit for this monoidal structure is $ω_{\stack X} = p^! k$.

We will be mainly concerned with the subcategory of holonomic D-modules since they enjoy extended functoriality.
\begin{Def}
    A $D$-module $\sheaf F ∈ \catDMod{\stack X}$ is called \emph{holonomic} if $f^!\sheaf F$ is holonomic for any smooth morphism $f\colon Z → \stack X$ from a scheme $Z$.
    The full subcategory of holonomic D-modules will be denoted $\catDModHol{\stack X}$.
\end{Def}

The following assertions mostly follow from their corresponding counterparts for schemes.
We refer to \cite{Braverman:LecturesOnAlgebraicDmodules} for proofs in the case on non-smooth schemes.

\begin{Prop}
    Let $f\colon \stack X → \stack Y$ be a schematic morphism.
    Then $f^!$ and $f_*$ restrict to functors
    \[
        f^!\colon \catDModHol{\stack Y} → \catDModHol{\stack X}
        \quad\text{and}\quad
        f_*\colon \catDModHol{\stack X} → \catDModHol{\stack Y}.
    \]
\end{Prop}

The Verdier duality functor on schemes induces an involutive anti auto-equivalence
\[
    \dualize_{\stack X}\colon \catDModHol{\stack X}^\mathrm{op} → \catDModHol{\stack X}
\]
such that for each smooth morphism $Z → \stack X$ of relative dimension $d$ from a scheme $Z$ one has
\[
    f^! ∘ \dualize_{\stack X} \cong \dualize_{Z} ∘ f^![-2d].
\]
The Verdier duality functor then allows us to define the \emph{non-standard functors} $f_!$ and $f^*$ for any schematic morphism $f\colon \stack X → \stack Y$ by
\begin{align*}
    f^* & = \dualize_{\stack X} ∘ f^! ∘ \dualize_{\stack Y} \colon \catDModHol{\stack Y} → \catDModHol{\stack X} \\
    \intertext{and}
    f_! & = \dualize_{\stack Y} ∘ f_* ∘ \dualize_{\stack X} \colon \catDModHol{\stack X} → \catDModHol{\stack Y}.
\end{align*}
We obtain adjoint pairs $(f_!,\, f^!)$ and $(f^*,\, f_*)$.
In particular we have
\[
    k_{\stack X} = f^* k_{\stack Y}.
\]
In some situations we can identify the non-standard functors with their standard counterparts.
If $f$ is smooth of relative dimension $d$ then $f^* = f^![-2d]$.
If $f$ is proper then $f_! = f_*$ and in particular $f_*$ is left adjoint to $f^!$.
The objects $ω_{\stack X}$ and $k_{\stack X}$ are always holonomic and
\[
    \dualize_{\stack X} ω_{\stack X} = k_{\stack X}.
\]

We will make use of the following lemma which follows from \cite[Lemma~5.1.6]{DrinfeldGaitsgory:2013:FinitenessQuestions}.

\begin{Lem}
    For a smooth and schematic morphism $f$ the functor $f^!$ is conservative.
\end{Lem}

\begin{Prop}[{\cite[\RomanNum{III}.4.2.1.3]{GaitsgoryRozenblyum:prelim:StudyInDAG}}]
    \label{prop:d-mod:pre:base-change}%
    Consider a Cartesian square
    \[
        \begin{tikzcd}
            \stack Z \arrow[d, "p"] \arrow[r, "q"] & \stack X₁ \arrow[d, "f"] \\
            \stack X₂ \arrow[r, "g"] & \stack Y
        \end{tikzcd}
    \]
    with schematic morphism $f$ (and hence $p$).
    Then there is a base change isomorphism
    \[
        p_* q^! \isoto g^! f_*
    \]
    of functors from $\catDMod{\stack{X₁}}$ to $\catDMod{\stack{X₂}}$.
    If furthermore $f$ (and hence $p$) is proper, then this isomorphism coincides with the natural transformation
    \[
        p_* q^! →
        p_* q^! f^! f_* =
        p_* p^! g^! f_* →
        g^! f_*
    \]
    induced by $(f_*,\,f^!)$ and $(p_*,\, p^!)$ adjunctions.
\end{Prop}

\begin{Prop}
    \label{prop:d-mod:pre:projection-formula}%
    If $f\colon \stack X → \stack Y$ is a schematic morphism then the projection formula holds, i.e.~there is a functorial isomorphism
    \[
        \sheaf F \otimes f_*(\sheaf G) \cong f_*\bigl( f^! \sheaf F \otimes \sheaf G)
    \]
    for $\sheaf F ∈ \catDMod{\stack Y}$ and $\sheaf G ∈ \catDMod{\stack X}$.
\end{Prop}

\begin{Rem}
    Propositions \ref{prop:d-mod:pre:base-change} and \ref{prop:d-mod:pre:projection-formula} hold more generally when $f$ is merely a \enquote{safe} morphism.
    Alternatively they hold in full generality after replacing $f_*$ by the \enquote{renormalized de Rham pushforward}.
    We fill not use either notion in this thesis and refer the interested reader to \cite{DrinfeldGaitsgory:2013:FinitenessQuestions}.
\end{Rem}

For D-modules on stacks we have the usual recollement package.
Let $i\colon \stack Z \hookrightarrow \stack X$ be a closed embedding and $j\colon \stack U \hookrightarrow \stack X$ the complementary open.
We have adjoint pairs $(i_*,\, i^!)$ and $(j^!,\, j_*)$.

\begin{Prop}[{\cite[Section~2.5]{GaitsgoryRozenblyum:2014:CrystalsAndDModules}}]
    \label{prop:d-mod:recollement-std}%
    There is an exact triangle of functors
    \[
        i_*i^! → \id → j_*j^!
    \]
    on $\catDMod{\stack X}$, the adjunction morphisms
    \[
        \id → i^!i_*
        \quad\text{and}\quad
        j^!j_* → \id
    \]
    are isomorphisms, the functors $j^!i_*$ and $i^!j_*$ vanish and $i_*$ and $j_*$ are full embeddings.
\end{Prop}

On holonomic D-modules we have the additional adjoint pairs $(i^*,\, i_*)$ and $(j_!,\, j^*)$.
By applying duality to Proposition~\ref{prop:d-mod:recollement-std} we obtain the distinguished triangle
\[
    j_! j^* → \id → i_*i^*
\]
and the identity $i^*j_! = 0$ on holonomic D-modules.
Further, the functor $j_!$ is a full embedding $\catDModHol{\stack U} \hookrightarrow \catDModHol{\stack X}$.

It is often useful to consider the pullback of a D-module on $\stack X$ to a smooth cover.

\begin{Def}
    \label{def:d-mod:pre:monodromic}%
    Let $X$ be a scheme with an action of an algebraic group $G$ and let $p\colon X → X/G$ be the quotient map.
    The \emph{monodromic} subcategory $\catDModMon{X}{G} ⊆ \catDMod{X}$ is the full subcategory generated by the essential image of $p^!\colon \catDMod{X/G} → \catDMod{X}$ (or equivalently by the essential image of $p^*$).
\end{Def}

\begin{Thm}[Contraction principle~{\cite[Proposition~3.2.2]{DrinfeldGaitsgory:2014:OnATheoremOfBraden}}]
    \label{thm:d-mod:pre:contraction_principle}%
    Let $X$ be a scheme with an action by $\Gm$ that extends to an action of the monoid $\as 1$.
    Let $i\colon X^0 \hookrightarrow X$ be the closed subscheme of $\Gm$-fixed points and let $π\colon X → X^0$ be the contraction morphism induced by the $\Gm$-equivariant morphism $\as 1 → \{0\}$.
    Then there is an isomorphism of functors
    \[
        i^* \cong π_* \colon \catDModMon{X}{\Gm} → \catDMod{X^0}.
    \]
\end{Thm}


\section{Monads}
\label{sec:d-mod:pre:monads}

We will deduce Theorem~\ref{thm:d-mod:main} from a isomorphism of monads on $\catDMod{\stack X}$.
In this section we give a short introduction to the theory of monads and the specific constructions that we will use.
However, in the interest of readability we will mainly do so informally, skipping over the intricacies of $∞$-categories.
The interested reader can find the correct $∞$-categorical formulations in the given references.

Thus we think of a \emph{monad} on a category $\cat C$ as consisting of a triple $(T, η, μ)$, where $T\colon \cat C → \cat C$ is an endofunctor of $\cat C$, and $η\colon \id_{\cat C} → T$ and $μ\colon T∘T → T$ are natural transformations that the diagrams
\begin{equation}
    \label{eq:d-mod:pre:monad-identities}
    \begin{tikzcd}
        T³ \arrow[r, "Tμ"] \arrow[d, "μT"'] & T² \arrow[d, "μ"] \\
        T² \arrow[r, "μ"'] & T
    \end{tikzcd}
    \quad\text{and}\quad
    \begin{tikzcd}
        T \arrow[r, "Tη"] \arrow[d, "ηT"'] \arrow[dr, equal] & T² \arrow[d, "μ"] \\
        T² \arrow[r, "μ"'] & T
    \end{tikzcd}
\end{equation}
commute.
Alternatively, we can think of $T$ being a monoid in the category of endofunctors of $\cat C$ with the monoidal structure given by composition of endofunctors.
This definition also gives the correct generalization to $∞$-categories \cite[Definition~4.7.0.1]{Lurie:2014-draft:HigherAlgebra}.

Let $X$ be an object of the category $\cat C$.
Then $T$ gives the vector space $\Hom_{\cat C}(X, TX)$ the structure of a dg algebra with multiplication map
\[
    (f,g) \mapsto μ_X ∘ Tf ∘ g,
\]
\[
    \begin{tikzcd}
        X \arrow[r, "g"] & TX \arrow[r, "Tf"] & T²X \arrow[r, "μ_X"] & TX.
    \end{tikzcd}
\]
The identities~\ref{eq:d-mod:pre:monad-identities} ensure that the algebra is associative and unital.

The most common source of monads is from a pair of adjoint functors $F\colon \cat C \rightleftarrows \cat D \cocolon G$.
One simply sets $T = G ∘ F$ and $η$ and $μ$ are given by the adjunction morphisms
\[
    \id[\cat C] → G ∘ F = T
    \qquad\text{and}\qquad
    T² = G ∘ (F ∘ G) ∘ F → G ∘ F = T.
\]
We note that the correct construction in more complicated in the $∞$-categorical case and refer to \cite[Section~4.7]{Lurie:2014-draft:HigherAlgebra}.
For any $X ∈ \cat C$ the algebra construction above gives an isomorphism of algebra
\[
    \Hom_{\cat C}(X, (GF)(X)) \cong
    \Hom_{\cat D}(FX, FX).
\]

Another common way to obtain monads in geometry is via a groupoid.
Recall that a groupoid $G_{\cx}$ in stacks consists of a stack $\stack G₀$ of \enquote{objects} and a stack $\stack G₁$ of \enquote{morphisms} together with
\begin{itemize}
    \item \emph{source} and \emph{target} maps $s,t\colon \stack G₁ \rightrightarrows \stack G₀$,
    \item a \emph{unit} $e\colon G₀ → G₁$,
    \item a \emph{multiplication} (or \emph{composition}) map $m\colon \stack G₁ ×\limits_{s,\stack G₀,t} \stack G₁ → \stack G₁$),
    \item an \emph{inverse} map $ι\colon \stack G₁ → \stack G₁$,
\end{itemize}
such that
\begin{itemize}
    \item $s ∘ e = t ∘ e = \id_{\stack G₀}$,
    \item $s ∘ m = s ∘ p₂$ and $t ∘ m = t ∘ p₁$ (where $p_i\colon \stack G₁ ×_{s,\stack G₀,t} \stack G₁$ are the projection maps).
    \item $m$ is associative,
    \item $ι$ interchanges $s$ and $t$ and is an inverse for $m$,
\end{itemize}
where all identities have to be understood in the correct $∞$-categorical way \cite[Section~6.1.2]{Lurie:2009:HigherToposTheory}.

\begin{Ex}
    For our purpose the most important example is the following:
    Let $f\colon \stack X → \stack S$ be a morphism of stacks.
    We set $\stack G_0 = \stack X$ and $\stack G₁ = \stack X ×_\stack S \stack X$.
    The source and target maps are given by $p₁$ and $p₂$, the unit by the diagonal $Δ\colon \stack X → \stack X×_\stack S\stack X$, the inverse by interchanging the factors and multiplication is $p₁₃\colon \stack X ×_\stack S \stack X ×_\stack S \stack X → \stack X×_\stack S\stack X$.
\end{Ex}

Let us for the moment assume that $s$ (and hence $t$) is proper and schematic.
In this case the maps $e$ and $m$ are also proper, since $s ∘ e = \id_{\stack G₀}$ and $s ∘ m = s ∘ p₂$ are proper.
In particular the functors $e^!\colon \catDMod{\stack G₁} → \catDMod{\stack G₀}$ and $m^!\colon \catDMod{\stack G₁} → \catDMod{\stack G₁ ×_{\stack G₀} \stack G₁}$ have left adjoints given by $e_*$ and $m_*$ respectively.
This allows us to give the endofunctor $T = s_*t^!$ of $\catDMod{\stack G₀}$ the structure of a monad in the following way:

\begin{itemize}
    \item By $(e_*,e^!)$-adjunction we have a transformation
        \[
            \id = (s∘e)_*(t∘e)^! = s_*e_*e^!t^! → s_*t^! = T.
        \]
    \item Consider the following commutative diagram
        \[
            \begin{tikzcd}[column sep=small]
                {} & & \stack G₁ \arrow[dddll, bend right, "s"] \arrow[dddrr, bend left, "t"] & & \\
                & & \stack G₁ ×_{\stack G₀} \stack G₁ \arrow[u, "m"] \arrow[dl, "p₂"] \arrow[dr, "p₁"] & & \\
                & \stack G₁ \arrow[dl, "s"] \arrow[dr, "t"] & & \stack G₁ \arrow[dl, "s"] \arrow[dr, "t"] & \\
                \stack G₀ & & \stack G₀ & & \stack G₀
            \end{tikzcd}
        \]
        with Cartesian middle square.
        Proper base change and $(m_*,m^!)$-adjunction gives a transformation
        \[
            T² =
            s_*t^!s_*t^! =
            (s∘p₂)_*(t∘p₁)^! =
            (s∘m)_*(t∘m)^! =
            s_*m_*m^!t^! →
            s_*t^! =
            T.
        \]
\end{itemize}

In the non-$∞$-categorical setting one could easily check by hand that this is indeed a monad.
To obtain the corresponding derived statement one applies an argument similar to \cite[Section~\RomanNum{II}.1.7.2]{GaitsgoryRozenblyum:prelim:StudyInDAG}.
We will discuss a version of this below.

Let now $f\colon \stack X → \stack Y$ be schematic and proper.
The Cartesian diagram
\[
    \begin{tikzcd}
        \stack X ×_{\stack Y} \stack X \arrow[r, "p_s"] \arrow[d, "p_t"] & \stack X \arrow[d, "f"] \\
        \stack X \arrow[r, "f"] & \stack Y
    \end{tikzcd}
\]
induces a groupoid with $\stack{G}₀ = \stack X$ and $\stack{G}₁ = \stack X ×_{\stack Y} \stack X$.
The above constructions now give two monads on $\catDMod{\stack{X}}$: one by $(f_*,f^!)$ adjunction and one from the groupoid structure.
The base change isomorphism
\[
    p_{t,*} p_s^! → f^! f_*
\]
gives an identification of these monads and hence of the algebras that they induce, i.e.~for any $\sheaf F ∈ \catDMod{\stack X}$ we have
\[
    \Hom(\sheaf F,\, p_{t,*} p_s^!\sheaf F) \cong
    \Hom(\sheaf F,\, f^! f_* \sheaf F) \cong
    \Hom(f_*\sheaf F,\, f_* \sheaf F).
\]

We will need to apply this construction for non-proper $f$.
Unfortunately, in this case none of the adjunctions used to define the monads are available.
We rectify this by restricting to the full subcategory of of holonomic D-modules and using the $!$-pushforward functors instead of the $*$-pushforward ones.
Of course, by doing so we do not automatically have base change isomorphisms available anymore.
Thus we have to explicitly require that all necessary base changes hold (this is usually called the Beck-Chevalley condition).

In order to formulate the condition, we need the concept of the \emph{nerve} of a groupoid.
This is the simplicial stack, also denoted $\stack{G}_\cx$, with
\[
    \stack G_i = \underbrace{\stack G₁ ×_{\stack G₀} \dotsb ×_{\stack G₀} \stack G₁}_{\text{$i$ factors}}.
\]
We refer to \cite[Section~6.1.2]{Lurie:2009:HigherToposTheory} for the correct $∞$-categorical setup.
The following lemma is now an immediate corollary of \cite[Lemma~\RomanNum{II}.1.7.1.4]{GaitsgoryRozenblyum:prelim:StudyInDAG} or \cite[Theorem~4.7.6.2]{Lurie:2014-draft:HigherAlgebra}.

\begin{Lem}
    \label{lem:d-mod:pre:groupoid_monad_hol}%
    Let $f\colon \stack X → \stack Y$ be a schematic morphism of stacks and let $\stack G_\cx$ be the corresponding groupoid.
    For each map $F\colon [n] → [m]$ in $\cat{Δ}^{\mathrm{op}}$ consider the corresponding square
    \[
        \begin{tikzcd}
            \stack G_{n+1} \arrow[r, "p_s"] \arrow[d, "p_{F+1}"] & \stack G_n \arrow[d, "p_F"] \\
            \stack G_{m+1} \arrow[r, "p_s"] & \stack G_m
        \end{tikzcd}
    \]
    where the vertical arrows are induced by $F$.
    Assume that for each such square the base change composition
    \[
        p_{F+1,!} p_s^! →
        p_{F+1,!} p_s^! p_F^! p_{F,!} =
        p_{F+1,!} p_{F+1}^! p_s^!  p_{F,!} →
        p_s^! p_{F,!}
    \]
    given by the adjunction morphisms is an isomorphism of functors $\catDModHol{\stack G_n} → \catDModHol{\stack G_{m+1}}$.
    Then the endofunctor $p_{t,!} p_s^!$ of $\catDModHol{\stack X}$ has a canonical structure of a monad and as such is isomorphic to the adjunction monad $f^!f_!$.
\end{Lem}

\section{Hochschild cohomology}

We recall that the Hochschild cohomology of a dg category $\cat C$ is the algebra of derived endomorphisms of the identity functor,
\[
    \HCoh(\cat C) = \mathbb{R}\mathrm{Hom}(\id[\cat C],\, \id[\cat C]).
\]
For the exact definition of the category $\mathbb{R}\mathrm{Hom} = \cat{Funct}(\cat C, \cat C)$ we refer to \cite{Keller:2006:OnDGCategories}.
Instead we will give a more concrete construction via kernels which can be applied to $\catDMod{\stack X}$.
For this let us restrict to the case of co-complete dg categories and let $\cat{Funct}_{\mathrm{cont}}(\cat C, \cat C)$ be the full subcategory of $\cat{Funct}(\cat C, \cat C)$ spanned by the continuous functors.
Then, since $\id[\cat C]$ is evidently continuous, we have
\[
    \HCoh(\cat C) =
    \Hom_{\cat{Funct}_{\mathrm{cont}}(\cat C, \cat C)}(\id[\cat C], \id[\cat C]).
\]
Let us further assume that $\cat C$ is dualizable with dual $\cat C^\dual$.
Thus there is a unit map
\[
    η\colon \catVect → \cat C^\dual \otimes \cat C
\]
and a counit map
\[
    ε\colon \cat C^\dual \otimes \cat C → \catVect
\]
fulfilling the usual compatibilities (cf.~\cite[Section~2]{BenZviNadler:arXiv:NonlinearTraces}).
Let $u = η(k)$.
Then to each continuous endofunctor $F$ of $\cat C$ we can associate its kernel $\id[\cat C^\dual] \otimes F(u) ∈ \cat C^\dual \otimes \cat C$ and conversely to each kernel $Q ∈ \cat C^\dual \otimes \cat C$ we can associate the endofunctor
\[
    \cat C
    \xrightarrow{\id[\cat C] \otimes Q}
    \cat C \otimes \cat C^\dual \otimes \cat C
    \xrightarrow{ε \otimes \id[\cat C]}
    \cat C.
\]
These assignments are mutually inverse and give an equivalence of dg categories
\[
    \cat{Funct}_{\mathrm{cont}}(\cat C, \cat C)
    \cong
    \cat C^\dual \otimes \cat C.
\]
In particular, the kernel for the identity is $u$ and hence we have
\[
    \HCoh(\cat C) =
    \Hom_{\cat C^\dual \otimes \cat C}(u, u).
\]
Let us now consider the case of $\cat C = \catDMod{\stack X}$ for a stack $X$.
Let $p\colon \stack X → \pt$ be the structure morphism and $Δ\colon \stack X → \stack X × \stack X$ the diagonal.
By \cite[Section~8.4]{DrinfeldGaitsgory:2013:FinitenessQuestions} the category $\catDMod{\stack X}$ is dualizable and there is a canonical indentification
\[
    \catDMod{\stack X}^\dual \otimes \catDMod{\stack X} \cong \catDMod{\stack X × \stack X}
\]
such that the unit map is given by $Δ_*p^!$ and thus we have
\[
    u = Δ_*ω_{\stack X}.
\]
We summarize the above discussion in the following lemma.

\begin{Lem}\label{lem:d-mod:pre:hcoh}
    Let $\stack X$ be a stack.
    Then the Hochschild cohomology of $\catDMod{\stack X}$ is given by the dg algebra
    \[
        \HCoh(\catDMod{\stack X}) =
        \Hom_{\catDMod{\stack X × \stack X}}(Δ_*ω_{\stack X},\, Δ_*ω_{\stack X}).
    \]
\end{Lem}
